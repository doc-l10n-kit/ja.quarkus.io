#!/usr/bin/env bash
set -eu

SCRIPT_DIR=$(cd $(dirname $0); pwd)
L10N_HOME=$(cd $(dirname $SCRIPT_DIR); pwd)
cd $L10N_HOME

sudo apt-get update
sudo apt-get -y install python3-pip git ruby-dev nodejs npm po4a gettext jq
sudo apt-get -y install libxml-filter-sort-perl # for xmlsort command
sudo pip3 install translate-toolkit Python-Levenshtein
sudo gem install bundler
sudo npm --global install surge

mkdir -p vendor

export DOC_L10N_KIT_VERSION=`jq ".doc-l10n-kit.version" config/l10n-kit.json -r`

git clone https://github.com/doc-l10n-kit/po4a.git vendor/po4a -b v0.66-mod1
curl -L https://github.com/doc-l10n-kit/doc-l10n-kit/releases/download/$DOC_L10N_KIT_VERSION/doc-l10n-kit-runner.jar -o vendor/doc-l10n-kit-runner.jar
